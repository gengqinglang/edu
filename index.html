<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•™è‚²è·¯å¾„è§„åˆ’åŠè´¹ç”¨ç²¾ç®—ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <header class="header">
            <h1 class="title">æ•™è‚²è·¯å¾„è§„åˆ’åŠè´¹ç”¨ç²¾ç®—ç³»ç»Ÿ</h1>
            <p class="subtitle">æ™ºèƒ½è§„åˆ’æ•™è‚²å‘å±•è·¯å¾„ï¼Œç²¾å‡†è®¡ç®—æ•™è‚²æŠ•èµ„æˆæœ¬</p>
        </header>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <!-- è¾“å…¥è¡¨å• -->
            <section class="input-section">
                <div class="form-container">
                    <h2 class="section-title">åŸºæœ¬ä¿¡æ¯</h2>
                    
                    <form id="educationForm" class="education-form">
                        <!-- å½“å‰æ•™è‚²é˜¶æ®µ -->
                        <div class="form-group">
                            <label class="form-label">å½“å‰æ•™è‚²é˜¶æ®µ</label>
                            <div class="option-grid" id="currentStageOptions">
                                <button type="button" class="option-btn active" data-value="å¹¼å„¿å›­">å¹¼å„¿å›­</button>
                                <button type="button" class="option-btn" data-value="å°å­¦">å°å­¦</button>
                                <button type="button" class="option-btn" data-value="åˆä¸­">åˆä¸­</button>
                                <button type="button" class="option-btn" data-value="é«˜ä¸­">é«˜ä¸­</button>
                                <button type="button" class="option-btn" data-value="å¤§å­¦">å¤§å­¦</button>
                                <button type="button" class="option-btn" data-value="ç ”ç©¶ç”Ÿ">ç ”ç©¶ç”Ÿ</button>
                                <button type="button" class="option-btn" data-value="åšå£«">åšå£«</button>
                            </div>
                            <input type="hidden" id="currentStage" name="currentStage" value="å¹¼å„¿å›­" required>
                        </div>

                        <!-- å½“å‰å¹´çº§ -->
                        <div class="form-group">
                            <label class="form-label">å½“å‰å¹´çº§</label>
                            <div class="option-grid" id="currentGradeOptions">
                                <button type="button" class="option-btn active" data-value="1å¹´çº§">1å¹´çº§</button>
                                <button type="button" class="option-btn" data-value="2å¹´çº§">2å¹´çº§</button>
                                <button type="button" class="option-btn" data-value="3å¹´çº§">3å¹´çº§</button>
                            </div>
                            <input type="hidden" id="currentGrade" name="currentGrade" value="1å¹´çº§" required>
                        </div>

                        <!-- å½“å‰æ•™è‚²æ°´å¹³ -->
                        <div class="form-group">
                            <div class="form-label-with-help">
                                <label class="form-label">å½“å‰æ•™è‚²æ°´å¹³</label>
                                <button type="button" class="help-text-btn" id="educationLevelHelpBtn" title="æŸ¥çœ‹ä¸åŒæ•™è‚²æ°´å¹³çš„ç‰¹ç‚¹å¯¹æ¯”">
                                    æŸ¥çœ‹å„æ°´å¹³ç‰¹ç‚¹å¯¹æ¯”
                                </button>
                            </div>
                            <div class="option-grid" id="currentLevelOptions">
                                <button type="button" class="option-btn active" data-value="å…¬ç«‹">
                                    <span class="option-text">å…¬ç«‹</span>
                                    <span class="option-help-icon" data-level="å…¬ç«‹" title="æŸ¥çœ‹å…¬ç«‹æ•™è‚²ç‰¹ç‚¹">?</span>
                                </button>
                                <button type="button" class="option-btn" data-value="æ™®é€šç§ç«‹">
                                    <span class="option-text">æ™®é€šç§ç«‹</span>
                                    <span class="option-help-icon" data-level="æ™®é€šç§ç«‹" title="æŸ¥çœ‹æ™®é€šç§ç«‹æ•™è‚²ç‰¹ç‚¹">?</span>
                                </button>
                                <button type="button" class="option-btn" data-value="æ°‘åŠåŒè¯­">
                                    <span class="option-text">æ°‘åŠåŒè¯­</span>
                                    <span class="option-help-icon" data-level="æ°‘åŠåŒè¯­" title="æŸ¥çœ‹æ°‘åŠåŒè¯­æ•™è‚²ç‰¹ç‚¹">?</span>
                                </button>
                            </div>
                            <input type="hidden" id="currentLevel" name="currentLevel" value="å…¬ç«‹" required>
                        </div>

                        <!-- ç›®æ ‡é˜¶æ®µ -->
                        <div class="form-group">
                            <label class="form-label">ç›®æ ‡æ•™è‚²é˜¶æ®µ</label>
                            <div class="option-grid" id="targetStageOptions">
                                <button type="button" class="option-btn" data-value="å°å­¦">å°å­¦</button>
                                <button type="button" class="option-btn" data-value="åˆä¸­">åˆä¸­</button>
                                <button type="button" class="option-btn" data-value="é«˜ä¸­">é«˜ä¸­</button>
                                <button type="button" class="option-btn active" data-value="å¤§å­¦">å¤§å­¦</button>
                                <button type="button" class="option-btn" data-value="ç ”ç©¶ç”Ÿ">ç ”ç©¶ç”Ÿ</button>
                                <button type="button" class="option-btn" data-value="åšå£«">åšå£«</button>
                            </div>
                            <input type="hidden" id="targetStage" name="targetStage" value="å¤§å­¦" required>
                        </div>

                        <!-- æäº¤æŒ‰é’® -->
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <span class="btn-text">å¼€å§‹è§„åˆ’</span>
                                <span class="btn-loading" style="display: none;">åˆ†æä¸­...</span>
                            </button>
                            <button type="button" class="btn btn-secondary" id="resetPlanBtn" style="display: none;">
                                é‡æ–°è§„åˆ’
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <div class="results-container">

                    
                    <!-- æ•™è‚²æ–¹å‘é€‰æ‹© -->
                    <div class="strategic-routes-container" id="strategicRoutesContainer">
                        <!-- æ•™è‚²æ–¹å‘å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>

                    <!-- è·¯å¾„è¯¦æƒ…åŒºåŸŸ -->
                    <div class="path-details-container" id="pathDetailsContainer" style="display: none;">
                        <div class="path-details-header">
                            <button class="btn btn-secondary" id="backToRoutesBtn">
                                <span>â† è¿”å›</span>
                            </button>
                            <h3 class="path-details-title" id="pathDetailsTitle">è·¯å¾„è¯¦æƒ…</h3>
                        </div>
                        
                        <!-- è·¯å¾„ç­›é€‰å™¨ -->
                        <div class="path-filters-container" id="pathFiltersContainer">
                            <!-- ç­›é€‰å™¨åŒºåŸŸ -->
                            <div class="filters-section">
                                <div class="filters-header" id="filtersHeader">
                                    <div class="filters-title-section">
                                        <h4>ç­›é€‰ä¸æ’åº</h4>
                                        <span class="toggle-filters-icon" id="toggleFiltersBtn">â–¶</span>
                                    </div>
                                    <span class="reset-filters-text" id="resetFiltersBtn" title="é‡ç½®æ‰€æœ‰ç­›é€‰æ¡ä»¶">é‡ç½®</span>
                                </div>
                                
                                <div class="filters-content" id="filtersContent" style="display: none;">
                                    <div class="filters-grid">
                                    <!-- æ•™è‚²é˜¶æ®µç­›é€‰ -->
                                    <div class="filter-group">
                                        <label class="filter-label">é”å®šå…³é”®é˜¶æ®µï¼š</label>
                                        <div class="stage-dropdown-container">
                                            <select id="stageSelect" class="stage-select">
                                                <option value="">é€‰æ‹©æ•™è‚²é˜¶æ®µ</option>
                                                <option value="å°å­¦">å°å­¦</option>
                                                <option value="åˆä¸­">åˆä¸­</option>
                                                <option value="é«˜ä¸­">é«˜ä¸­</option>
                                                <option value="å¤§å­¦">å¤§å­¦</option>
                                                <option value="ç ”ç©¶ç”Ÿ">ç ”ç©¶ç”Ÿ</option>
                                                <option value="åšå£«">åšå£«</option>
                                            </select>
                                            <select id="levelSelect" class="level-select" disabled>
                                                <option value="">é€‰æ‹©æ•™è‚²æ°´å¹³</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <!-- æ’åºé€‰æ‹© -->
                                    <div class="filter-group">
                                        <label class="filter-label">æ’åºæ–¹å¼ï¼š</label>
                                        <div class="sort-buttons">
                                            <button type="button" class="sort-btn" data-sort="prevalence">
                                                <span class="sort-text">æŒ‰å¸¸è§åº¦æ’åº</span>
                                            </button>
                                            <button type="button" class="sort-btn" data-sort="cost-high">
                                                <span class="sort-text">æŒ‰æ€»è´¹ç”¨ç”±é«˜åˆ°ä½</span>
                                            </button>
                                            <button type="button" class="sort-btn" data-sort="cost-low">
                                                <span class="sort-text">æŒ‰æ€»è´¹ç”¨ç”±ä½åˆ°é«˜</span>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- è´¹ç”¨åŒºé—´ç­›é€‰ -->
                                    <div class="filter-group cost-range-group">
                                        <label class="filter-label">æ€»è´¹ç”¨åŒºé—´ï¼š</label>
                                        <div class="cost-range-filter">
                                            <div class="dual-range-slider">
                                                <input type="range" id="costRangeMin" class="cost-range-input range-min" min="0" max="1000000" step="10000">
                                                <input type="range" id="costRangeMax" class="cost-range-input range-max" min="0" max="1000000" step="10000">
                                            </div>
                                            <div class="cost-range-display">
                                                <span id="costRangeMinDisplay">0</span> - <span id="costRangeMaxDisplay">0</span> å…ƒ
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- ç»“æœç»Ÿè®¡ -->
                                    <div class="results-stats" id="resultsStats">
                                        <span class="results-count">ä¸ºæ‚¨æ‰¾åˆ°äº† <strong id="filteredPathsCount">0</strong> æ¡åŒ¹é…è·¯å¾„</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- è·¯å¾„å·®å¼‚æç¤º -->
                        <div class="path-difference-hint">
                            <span class="hint-icon">ğŸ’¡</span>
                            <span class="hint-text">æ©™è‰²æ ‡è®°è¡¨ç¤ºä¸è·¯å¾„1çš„ä¸åŒä¹‹å¤„</span>
                        </div>

                        <!-- è·¯å¾„åˆ—è¡¨ -->
                        <div class="paths-container" id="pathsContainer">
                            <!-- è·¯å¾„åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- é¡µè„š -->
        <footer class="footer">
            <p>&copy; 2024 æ•™è‚²è·¯å¾„è§„åˆ’ç³»ç»Ÿ. æ™ºèƒ½æ•™è‚²è§„åˆ’ï¼ŒåŠ©åŠ›æœªæ¥å‘å±•.</p>
        </footer>
    </div>

    <!-- å•ä¸ªæ•™è‚²æ°´å¹³ç‰¹å¾å¼¹çª— -->
    <div class="level-tooltip" id="levelTooltip" style="display: none;">
        <div class="tooltip-content">
            <div class="tooltip-header">
                <h4 class="tooltip-title" id="tooltipTitle"></h4>
                <button type="button" class="tooltip-close" id="tooltipClose">Ã—</button>
            </div>
            <div class="tooltip-body" id="tooltipBody">
                <!-- åŠ¨æ€å†…å®¹ -->
            </div>
        </div>
    </div>

    <!-- æ•™è‚²æ°´å¹³ç‰¹ç‚¹æ¨¡æ€æ¡† -->
    <div class="modal-overlay" id="educationLevelModal" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title">æ•™è‚²æ°´å¹³æ ¸å¿ƒç‰¹ç‚¹å¯¹æ¯”</h3>
                <button type="button" class="modal-close-btn" id="closeModalBtn">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="education-level-guide">
                    <p class="guide-intro">äº†è§£ä¸åŒæ•™è‚²æ°´å¹³çš„ç‰¹è‰²ä¼˜åŠ¿ï¼Œå¸®åŠ©æ‚¨åšå‡ºæ˜æ™ºçš„é€‰æ‹©ï¼š</p>
                    
                    <!-- æ•™è‚²é˜¶æ®µé€‰æ‹©å™¨ -->
                    <div class="stage-selector">
                        <label class="selector-label">é€‰æ‹©æ•™è‚²é˜¶æ®µï¼š</label>
                        <div class="stage-tabs" id="stageTabsModal">
                            <button type="button" class="stage-tab active" data-stage="å¹¼å„¿å›­">å¹¼å„¿å›­</button>
                            <button type="button" class="stage-tab" data-stage="å°å­¦">å°å­¦</button>
                            <button type="button" class="stage-tab" data-stage="åˆä¸­">åˆä¸­</button>
                            <button type="button" class="stage-tab" data-stage="é«˜ä¸­">é«˜ä¸­</button>
                            <button type="button" class="stage-tab" data-stage="å¤§å­¦">å¤§å­¦</button>
                            <button type="button" class="stage-tab" data-stage="ç ”ç©¶ç”Ÿ">ç ”ç©¶ç”Ÿ</button>
                            <button type="button" class="stage-tab" data-stage="åšå£«">åšå£«</button>
                        </div>
                    </div>
                    
                    <!-- æ•™è‚²æ°´å¹³ç‰¹ç‚¹å±•ç¤ºåŒºåŸŸ -->
                    <div class="levels-comparison" id="levelsComparison">
                        <!-- åŠ¨æ€ç”Ÿæˆçš„æ•™è‚²æ°´å¹³ç‰¹ç‚¹å¯¹æ¯”å†…å®¹ -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="modalConfirmBtn">æˆ‘çŸ¥é“äº†</button>
            </div>
        </div>
    </div>

    <!-- ä¸´æ—¶è°ƒè¯•æ ·å¼ -->
    <style>
        /* å¼ºåˆ¶æ˜¾ç¤ºé—®å·å›¾æ ‡ - è°ƒè¯•ç”¨ */
        .option-help-icon {
            position: absolute !important;
            right: 8px !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            width: 18px !important;
            height: 18px !important;
            border-radius: 50% !important;
            background-color: #01BCD6 !important;
            color: white !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-size: 11px !important;
            font-weight: bold !important;
            cursor: pointer !important;
            z-index: 999 !important;
            line-height: 1 !important;
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        /* ç¡®ä¿å®¹å™¨æ”¯æŒç»å¯¹å®šä½ */
        #currentLevelOptions .option-btn {
            position: relative !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }
        
        /* è°ƒè¯•è¾¹æ¡† */
        .option-help-icon {
            border: 2px solid red !important;
        }
    </style>

    <!-- åŠ è½½è„šæœ¬ -->
    <script src="js/education-data.js"></script>
    <script src="js/education-types.js"></script>
    <script src="js/education-cost-data.js"></script>
    <script src="js/education-grade-cost-data.js"></script>
    <script src="js/cost-calculator.js"></script>
    <script src="js/match-score-calculator.js"></script>
    <script src="js/education-level-features.js"></script>
    <script src="js/personalized-content.js"></script>
    <script src="js/strategic-route-templates.js"></script>
    <script src="js/path-finder.js"></script>
    <script src="js/path-clusterer.js"></script>
    <script src="js/path-ranker.js"></script>
    <script src="js/path-filter.js"></script>
    <script src="js/hint-generator.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
