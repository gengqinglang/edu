# 教育路径标签系统说明文档

## 概述

本系统使用一套完整的标签体系来分析和分类教育路径，帮助用户理解不同路径的特征和战略意义。

## 一、核心标签类型

### 1. 转轨时机标签 (TransTimingTag)

描述从国内体系转向国际体系的时间点。

| 标签值 | 中文含义 | 定义规则 | 示例路径 |
|--------|----------|----------|----------|
| `TRANS_NONE` | 全程无转轨 | 所有阶段都是国内体系，或所有阶段都是国际体系 | 小学公立→初中公立→高中公立→国内本科 |
| `TRANS_EARLY` | 早期转轨 | 在小学或初中阶段转入国际体系 | 小学公立→初中民办双语→高中民办国际化→海外本科 |
| `TRANS_MID` | 中期转轨 | 在高中阶段转入国际体系 | 小学公立→初中公立→高中公立国际部→海外本科 |
| `TRANS_LATE` | 晚期转轨 | 在本科或研究生阶段转入国际体系 | 小学公立→初中公立→高中公立→国内本科→海外硕士 |
| `TRANS_MULTIPLE` | 多次转轨 | 国际体系阶段不连续，存在多次转轨 | 小学公立→初中民办双语→高中公立→海外本科 |

### 2. 目标学位标签 (TargetDegreeTag)

基于用户输入的目标阶段设置。

| 标签值 | 中文含义 | 定义规则 | 说明 |
|--------|----------|----------|------|
| `TARGET_UG` | 目标本科 | 目标阶段为"大学" | 以本科为终点 |
| `TARGET_MASTER` | 目标硕士 | 目标阶段为"研究生" | 以硕士为终点 |
| `TARGET_PHD` | 目标博士 | 目标阶段为"博士" | 以博士为终点 |

### 3. 学位类型标签 (DegreeTypeTag)

描述目标学位的获取地点。

| 标签值 | 中文含义 | 定义规则 | 说明 |
|--------|----------|----------|------|
| `DEGREE_DOMESTIC` | 国内学位 | 目标阶段水平为国内院校 | 国内公办、国内民办、中外合作办学 |
| `DEGREE_OVERSEAS` | 海外学位 | 目标阶段水平为海外院校 | 海外大学、海外硕士、海外博士 |

### 4. 可行性标签 (FeasibilityTag)

基于路径的常见度和规则库中的可行性设置。

| 标签值 | 中文含义 | 定义规则 | 说明 |
|--------|----------|----------|------|
| `FEASIBLE_HIGH` | 高可行性 | 所有路径节点都是feasible | 常见且无条件可行 |
| `FEASIBLE_MEDIUM` | 中等可行性 | 包含conditional或较罕见路径 | 有条件可行或较罕见 |
| `FEASIBLE_LOW` | 低可行性 | 包含infeasible或非常罕见路径 | 不可行或非常罕见 |

## 二、国际体系水平定义

系统根据以下规则判断某个教育水平是否为国际体系：

### 小学/初中阶段
- `民办双语` ✅ 国际体系
- `外籍人员子女学校` ✅ 国际体系
- `公立` ❌ 国内体系
- `普通私立` ❌ 国内体系

### 高中阶段
- `公立国际部` ✅ 国际体系
- `民办国际化学校` ✅ 国际体系
- `外籍人员子女学校` ✅ 国际体系
- `公立` ❌ 国内体系
- `民办普通高中` ❌ 国内体系

### 大学/研究生阶段
- `海外大学` ✅ 国际体系
- `海外硕士` ✅ 国际体系
- `海外博士` ✅ 国际体系
- `国内公办` ❌ 国内体系
- `国内民办` ❌ 国内体系
- `中外合作办学` ❌ 国内体系
- `国内硕士` ❌ 国内体系
- `国内博士` ❌ 国内体系

## 三、标签计算算法

### 转轨时机标签计算步骤

1. **收集国际体系阶段**：遍历路径中所有节点，识别国际体系阶段
2. **判断全程无转轨**：如果国际体系阶段数为0或等于总阶段数，返回`TRANS_NONE`
3. **判断连续性**：检查国际体系阶段是否连续
   - 连续：根据第一个国际体系阶段确定转轨时机
   - 不连续：返回`TRANS_MULTIPLE`
4. **确定转轨时机**：
   - 第一个国际体系在小学/初中 → `TRANS_EARLY`
   - 第一个国际体系在高中 → `TRANS_MID`
   - 第一个国际体系在大学/研究生 → `TRANS_LATE`

### 连续性判断算法

```typescript
const allStages = ['小学', '初中', '高中', '大学', '研究生'];
const internationalIndices = internationalStages.map(stage => allStages.indexOf(stage));
const isConsecutive = internationalIndices.every((index, i) => 
  i === 0 || index === internationalIndices[i - 1] + 1
);
```

## 四、标签应用场景

1. **路径聚类**：根据标签组合将路径分组到不同战略路线
2. **路径排序**：在战略路线内根据可行性标签排序
3. **用户推荐**：根据标签特征推荐合适的教育路径
4. **统计分析**：分析不同转轨时机的分布和成功率

## 五、标签扩展说明

### 辅助标签 (PathFeature)

除了核心标签外，系统还使用辅助标签进行更细化的描述：

- `domestic_ug`：国内本科
- `overseas_ug`：海外本科
- `domestic_pg`：国内研究生
- `overseas_pg`：海外研究生
- `gaokao`：参加高考
- `early_transition`：早期转轨
- `late_transition`：晚期转轨
- `cost_high`：费用高昂

这些辅助标签主要用于前端过滤和排序，不参与核心的战略分类。

## 六、标签系统优势

1. **标准化**：统一的标签体系确保分类的一致性
2. **可扩展**：易于添加新的标签类型和规则
3. **可解释**：每个标签都有明确的定义和含义
4. **自动化**：基于算法自动计算，减少人工干预
5. **灵活性**：支持动态调整标签规则和分类标准
