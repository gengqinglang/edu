# 战略路线映射关系文档

## 概述

本文档详细说明了教育路径标签与战略路线的映射关系，以及如何根据标签组合动态生成战略分类。

## 一、战略路线分类体系

### 1. 国内直达路线

**标签组合**：`TRANS_NONE + DEGREE_DOMESTIC`

**中文名称**：国内直达路线

**动态命名规则**：
- 目标本科：国内直达本科路线
- 目标硕士：国内直达硕士路线  
- 目标博士：国内直达博士路线

**路径特征**：
- 全程国内教育体系
- 获得国内学位
- 经济压力小，竞争激烈

**示例路径**：
- 小学公立→初中公立→高中公立→国内本科（目标大学）
- 小学公立→初中公立→高中公立→国内本科→国内硕士（目标研究生）

**优势**：
- 费用最低
- 熟悉的教育环境
- 政策支持

**劣势**：
- 高考竞争激烈
- 国际化程度有限
- 创新能力培养相对不足

### 2. 早期国际转轨路径

**标签组合**：`TRANS_EARLY + DEGREE_OVERSEAS`

**中文名称**：早期国际转轨路径

**动态命名规则**：
- 目标本科：早期国际转轨本科路径
- 目标硕士：早期国际转轨硕士路径
- 目标博士：早期国际转轨博士路径

**路径特征**：
- 小学或初中阶段转入国际体系
- 获得海外学位
- 转轨时机早，适应性强

**示例路径**：
- 小学公立→初中民办双语→高中民办国际化→海外本科
- 小学公立→初中外籍→高中外籍→海外本科

**优势**：
- 转轨时机早，适应性强
- 国际化视野开阔
- 语言能力培养充分
- 海外名校机会多

**劣势**：
- 费用投入较高
- 文化适应挑战
- 回国发展需重新适应

### 3. 海外直通路线

**标签组合**：`TRANS_NONE + DEGREE_OVERSEAS`

**中文名称**：海外直通路线

**动态命名规则**：
- 目标本科：海外直通本科路线
- 目标硕士：海外直通硕士路线
- 目标博士：海外直通博士路线

**路径特征**：
- 全程国际体系
- 获得海外学位
- 准备充分，费用高

**示例路径**：
- 小学外籍→初中外籍→高中外籍→海外本科（目标大学）
- 小学民办双语→初中民办双语→高中民办国际化→海外本科

**优势**：
- 国际化程度高
- 申请海外名校优势明显
- 语言能力突出

**劣势**：
- 费用最高
- 可能缺乏国内基础教育
- 文化认同问题

### 4. 中期转轨路线

**标签组合**：`TRANS_MID + DEGREE_OVERSEAS`

**中文名称**：中期转轨路线

**动态命名规则**：
- 目标本科：中期转轨本科路线
- 目标硕士：中期转轨硕士路线
- 目标博士：中期转轨博士路线

**路径特征**：
- 高中阶段转入国际体系
- 获得海外学位
- 平衡基础教育和留学准备

**示例路径**：
- 小学公立→初中公立→高中公立国际部→海外本科→海外硕士（目标研究生）
- 小学公立→初中公立→高中民办国际化→海外本科（目标大学）

**优势**：
- 兼顾国内基础教育
- 高中阶段充分准备留学
- 费用相对可控

**劣势**：
- 转轨适应期
- 需要额外准备国际课程
- 时间安排紧张

### 5. 晚期转轨路线

**标签组合**：`TRANS_LATE + DEGREE_OVERSEAS`

**中文名称**：晚期转轨路线

**动态命名规则**：
- 目标本科：晚期转轨本科路线
- 目标硕士：晚期转轨硕士路线
- 目标博士：晚期转轨博士路线

**路径特征**：
- 本科或研究生阶段转入海外体系
- 获得海外学位
- 性价比高，但需适应海外教育

**示例路径**：
- 小学公立→初中公立→高中公立→国内本科→海外硕士（目标研究生）
- 小学公立→初中公立→高中公立→海外本科（目标大学）

**优势**：
- 性价比最高
- 国内基础教育扎实
- 适应能力强

**劣势**：
- 语言准备时间短
- 文化适应挑战
- 申请竞争激烈

### 6. 回国发展路线

**标签组合**：`TRANS_LATE + DEGREE_DOMESTIC`

**中文名称**：回国发展路线

**动态命名规则**：
- 目标本科：回国发展本科路线
- 目标硕士：回国发展硕士路线
- 目标博士：回国发展博士路线

**路径特征**：
- 海外经历后回国获得学位
- 常见于海外本科后回国读研或读博

**示例路径**：
- 小学公立→初中公立→高中公立→海外本科→国内硕士（目标研究生）
- 小学公立→初中公立→高中公立→海外本科→国内博士（目标博士）

**优势**：
- 国际化视野
- 国内政策支持
- 就业优势明显

**劣势**：
- 转轨成本高
- 时间周期长
- 政策变化风险

### 7. 不可行路径

**标签组合**：`FEASIBLE_LOW`

**中文名称**：不可行路径

**路径特征**：
- 包含不可行或非常罕见的转换
- 需要特殊条件或身份

**示例路径**：
- 包含"外籍人员子女学校"但无外籍身份的路径
- 包含"公立国际部"但无户籍的路径

**处理方式**：
- 单独分类，不与其他路线混合
- 提供不可行原因说明
- 给出替代建议

### 8. 其他个性化路线

**标签组合**：其他未分类的标签组合

**中文名称**：其他个性化路线

**路径特征**：
- 非常见的路径组合
- 需要个性化规划

**示例路径**：
- `TRANS_EARLY + DEGREE_DOMESTIC`（早期转轨但获得国内学位）
- `TRANS_MULTIPLE`（多次转轨）

**处理方式**：
- 作为兜底分类
- 提供个性化建议
- 强调专业咨询

## 二、动态分类算法

### 1. 分类优先级

系统按以下优先级展示战略路线：

1. **国内直达路线** - 最常见，费用最低
2. **中期转轨路线** - 平衡选择，性价比高
3. **晚期转轨路线** - 性价比最高
4. **海外直通路线** - 国际化程度最高
5. **回国发展路线** - 特殊路径
6. **不可行路径** - 单独处理
7. **其他个性化路线** - 兜底分类

### 2. 路径数量阈值

- 路径数量 ≥ 3：独立显示
- 路径数量 1-2：合并到"其他个性化路线"
- 路径数量 0：不显示

### 3. 可行性评分

每个战略路线计算可行性评分：

```typescript
feasibilityScore = (feasiblePaths * 1.0 + conditionalPaths * 0.5 + infeasiblePaths * 0.0) / totalPaths
```

## 三、用户当前阶段考虑

### 1. 标签计算范围

标签计算基于从**当前阶段到目标阶段**的路径片段，不包括当前阶段之前的历史。

### 2. 当前阶段不可变

- 当前阶段的教育水平不可修改
- 路径规划从下一个教育阶段开始
- 确保路径的连续性和合理性

### 3. 动态命名调整

战略路线名称根据用户的目标阶段动态调整：

- 目标大学：路线名称中的"学位"替换为"本科"
- 目标研究生：路线名称中的"学位"替换为"硕士"
- 目标博士：路线名称中的"学位"替换为"博士"

## 四、扩展和维护

### 1. 添加新战略路线

1. 在`PathClusterer.ts`中添加新的标签组合条件
2. 定义路线名称和描述
3. 更新前端显示逻辑

### 2. 修改现有路线

1. 调整标签组合条件
2. 更新路线描述和示例
3. 重新测试分类效果

### 3. 自定义路线

支持根据用户偏好创建自定义战略路线：

- 基于费用偏好
- 基于时间偏好
- 基于风险偏好

## 五、技术实现

### 1. 后端实现

文件位置：`src/services/PathClusterer.ts`

核心方法：
- `clusterPaths()`: 主要聚类方法
- `calculateTransTimingTag()`: 计算转轨时机标签
- `calculateDegreeTypeTag()`: 计算学位类型标签

### 2. 前端实现

文件位置：`frontend/js/path-clusterer.js`

功能：
- 实时聚类计算
- 动态路线显示
- 用户交互处理

### 3. 数据流

```
用户输入 → 路径生成 → 标签计算 → 战略聚类 → 路线排序 → 前端显示
```

## 六、最佳实践

### 1. 标签设计原则

- **互斥性**：标签之间不应重叠
- **完整性**：覆盖所有可能的路径组合
- **可解释性**：每个标签都有明确的业务含义
- **可扩展性**：易于添加新的标签类型

### 2. 战略路线设计原则

- **用户导向**：基于用户真实需求设计
- **差异化**：每个路线都有独特的价值主张
- **平衡性**：覆盖不同费用、时间、风险偏好
- **实用性**：提供可操作的建议

### 3. 维护建议

- 定期审查标签规则的有效性
- 根据用户反馈调整分类标准
- 保持文档与代码的同步更新
- 建立测试用例验证分类准确性
